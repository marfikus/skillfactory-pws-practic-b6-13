<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>Add new album</title>

    </head>
    <body>
        <form id="newAlbumForm" action="http://localhost:8080/albums" method="post">
            <label for="year">Year:</label><br>
            <input type="text" id="year" name="year"><br>
            <label for="artist">Artist:</label><br>
            <input type="text" id="artist" name="artist"><br>
            <label for="genre">Genre:</label><br>
            <input type="text" id="genre" name="genre"><br>
            <label for="album">Album:</label><br>
            <input type="text" id="album" name="album"><br>
            <!-- <input type="submit" value="Add album to db"> -->
        </form>
        <button onclick="checkFormAddAlbum()">Add album to db</button>
<!--         При отправке формы get-запросом, браузер формирует url, 
        который не подходит под тот шаблон, что ожидает сервер.
        Поэтому перед отправкой с помощью js формируем то, что нужно.
        Придумал 2 варианта: 1)с готовой формой 2)с генерацией формы из js.
        Оставил первый. -->
        <!-- <form id="searchForm" method="get" onsubmit="findAlbums()" target="_blank"> -->
        <div class="search-container">
            <label for="artist">Artist:</label><br>
            <input type="text" id="artistForSearch"><br>
            <!-- <input type="submit" value="Find albums"> -->
            <button id="findAlbums" onclick="findAlbums()">Find albums</button>
        <!-- </form> -->
        </div>
        <script type="text/javascript">

            function checkFormAddAlbum() {
                if (year.value.trim() === "") {
                    alert("Пустое поле 'Год'!")
                    return;
                }
                if (artist.value.trim() === "") {
                    alert("Пустое поле 'Исполнитель'!")
                    return;
                }
                if (genre.value.trim() === "") {
                    alert("Пустое поле 'Жанр'!")
                    return;
                }
                if (album.value.trim() === "") {
                    alert("Пустое поле 'Название'!")
                    return;
                }

                newAlbumForm.submit();
            }
        
            function findAlbums() {
                let searchValue = artistForSearch.value.trim();
                if (searchValue === "") {
                    alert("Пустое поле поиска!")
                    return;
                }

                let form = document.createElement("form");
                form.action = "http://localhost:8080/albums/" + searchValue;
                form.method = "GET";
                // form.target = "_blank";
                document.body.append(form);
                form.submit();
            }

        </script>
    </body>
</html>

