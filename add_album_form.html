<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>Add new album</title>

    </head>
    <body>
        <form action="http://localhost:8080/albums" method="post" target="_blank">
            <label for="year">Year:</label><br>
            <input type="text" id="year" name="year"><br>
            <label for="artist">Artist:</label><br>
            <input type="text" id="artist" name="artist"><br>
            <label for="genre">Genre:</label><br>
            <input type="text" id="genre" name="genre"><br>
            <label for="album">Album:</label><br>
            <input type="text" id="album" name="album"><br>
            <input type="submit" value="Add album to db">
        </form>
<!--         При отправке формы get-запросом, браузер формирует url, 
        который не подходит под тот шаблон, что ожидает сервер.
        Поэтому перед отправкой с помощью js формируем то, что нужно.
        Придумал 2 варианта: 1)с готовой формой 2)с генерацией формы из js.
        Оставил первый. -->
        <!-- <form id="searchForm" method="get" onsubmit="findAlbums()" target="_blank"> -->
        <div class="search-container">
            <label for="artist">Artist:</label><br>
            <input type="text" id="artistForSearch"><br>
            <!-- <input type="submit" value="Find albums"> -->
            <button id="findAlbums" onclick="findAlbums()">Find albums</button>
        <!-- </form> -->
        </div>
        <script type="text/javascript">
        
            function findAlbums() {
                if (artistForSearch.value === "") {
                    alert("Пустое поле поиска!")
                    return; 
                }
                // searchForm.action = "http://localhost:8080/albums/" + artistForSearch.value;

                let form = document.createElement("form");
                form.action = "http://localhost:8080/albums/" + artistForSearch.value;
                form.method = "GET";
                form.target = "_blank";
                document.body.append(form);
                form.submit();
            }

        </script>
    </body>
</html>

